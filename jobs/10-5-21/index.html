<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Learn, todo and done 10-14/5/21 &middot; </title>
        <meta name="description" content="Weekly plan">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.90.0" />
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="Learn, todo and done 10-14/5/21">
<meta property="og:description" content="Weekly plan">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kencho51.github.io/jobs/10-5-21/">
        <link rel="stylesheet" href="https://kencho51.github.io/dist/site.css">
        <link rel="stylesheet" href="https://kencho51.github.io/dist/syntax.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        
        
        
        
        <link rel="icon" href="/image/favicon.ico" type="/image" />
        <link rel="apple-touch-icon" sizes="180x180" href="/image/apple-touch-icon.png">
        <link rel="icon" type="image" sizes="32x32" href="/image/favicon-32x32.png">
        <link rel="icon" type="image" sizes="16x16" href="/image/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest.json">
    </head>
    <body>
        
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HESL282TL4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-HESL282TL4');
</script>

        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a title="kencho51" href="https://kencho51.github.io/">kencho51</a>
                            </h1>
                        
                        <a class="button-square" href="https://kencho51.github.io/index.xml"><i class="fa fa-rss"></i></a>
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="https://github.com/kencho51" rel="me">
                                <i class="fa fa-github-alt"></i>
                            </a>
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:kencho.gigascience@gmail.com">
                                <i class="fa fa-envelope"></i>
                            </a>
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a href="/page/about/">About</a>
    </li>

    <li class="site-nav-item">
        <a href="/page/contact/">Contact</a>
    </li>

    <li class="site-nav-item">
        <a href="/jobs">Jobs</a>
    </li>

    <li class="site-nav-item">
        <a href="/post">Posts</a>
    </li>

    <li class="site-nav-item">
        <a href="/projects/">Projects</a>
    </li>

    <li class="site-nav-item">
        <a href="/reference">Reference</a>
    </li>

    <li class="site-nav-item">
        <a href="/reference/hugoisforlovers/">Getting Started with Hugo</a>
    </li>


                    </ul>
                </div>
            </header>

            <div id="container">



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-166952674-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166952674-1');
</script>



<div class="container">
    <article class="post-container">
        <header class="post-header">
    <h1 class="post-title">Learn, todo and done 10-14/5/21</h1>
    
        <p class="post-description">Weekly plan</p>
    
</header>

        <div class="post-content clearfix">
    

    <h3 id="learn">Learn</h3>
<ol>
<li>Clean Code, <a href="https://www.youtube.com/watch?v=7EmboKQH8lM">YouTube</a></li>
<li>PHP: The Right Way, <a href="https://phptherightway.com/">link</a></li>
<li>Udemy courses</li>
<li>Design Pattern, <a href="https://designpatternsphp.readthedocs.io/en/latest/README.html">Doc</a>, <a href="https://medium.com/@whatjackhasmade/pattern-libraries-abcc45c6144c">Pattern Libraries</a></li>
<li>Postman for testing API, <a href="https://www.freecodecamp.org/news/learn-how-to-use-postman-to-test-apis/">YouTube</a></li>
<li>Essential Scrum, Chapter [5, 7, 17, 18, 19]</li>
<li>Terraform</li>
<li>Ansible
<ul>
<li><a href="https://www.youtube.com/watch?v=fHO1X93e4WA">IBMCloud</a></li>
<li><a href="https://www.youtube.com/watch?v=1id6ERvfozo">TechWorld</a></li>
<li><a href="https://www.youtube.com/watch?v=POPP2WTJ8es">What is IaCode</a></li>
</ul>
</li>
<li>DevOps Crash Course, <a href="https://www.youtube.com/watch?v=OXE2a8dqIAI">youtube</a></li>
</ol>
<h3 id="todo---project-repohttpsgithubcomkencho51mint_doi-dochttpsdocsgooglecomdocumentd1copk9e9qclod91wrn1lreebefmdb5cwohielj3ifklcedit">Todo - Project <a href="https://github.com/kencho51/mint_doi">repo</a>, <a href="https://docs.google.com/document/d/1CopK9e9QclOd91WRN1LREEBefMDb5cWoHiElj3IfKLc/edit#">doc</a></h3>
<ol>
<li>Study <code>actionMint</code> in  <code>/protected/controller/AdminDatasetController.php</code></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"> <span class="sd">/**
</span><span class="sd">  *	post metadata, mint a new DOI
</span><span class="sd">  *
</span><span class="sd">  */</span>
 <span class="k">public</span> <span class="k">function</span> <span class="nf">actionMint</span><span class="p">()</span>
 <span class="p">{</span>
     <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
     <span class="nv">$status_array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Submitted&#39;</span><span class="p">,</span> <span class="s1">&#39;UserStartedIncomplete&#39;</span><span class="p">,</span> <span class="s1">&#39;Curation&#39;</span><span class="p">);</span>

     <span class="nv">$mds_metadata_url</span><span class="o">=</span><span class="s2">&#34;https://mds.datacite.org/metadata&#34;</span><span class="p">;</span>
     <span class="nv">$mds_doi_url</span><span class="o">=</span><span class="s2">&#34;https://mds.datacite.org/doi&#34;</span><span class="p">;</span>

     <span class="nv">$mds_username</span> <span class="o">=</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;mds_username&#39;</span><span class="p">];</span>
     <span class="nv">$mds_password</span> <span class="o">=</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;mds_password&#39;</span><span class="p">];</span>
     <span class="nv">$mds_prefix</span> <span class="o">=</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;mds_prefix&#39;</span><span class="p">];</span>

     <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;doi&#39;</span><span class="p">]))</span> <span class="p">{</span>
         <span class="nv">$doi</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;doi&#39;</span><span class="p">];</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">stristr</span><span class="p">(</span><span class="nv">$doi</span><span class="p">,</span> <span class="s2">&#34;/&#34;</span><span class="p">))</span> <span class="p">{</span>
             <span class="nv">$temp</span> <span class="o">=</span> <span class="nx">explode</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="nv">$doi</span><span class="p">);</span>
             <span class="nv">$doi</span> <span class="o">=</span> <span class="nv">$temp</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
         <span class="p">}</span>

         <span class="nv">$doi</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$doi</span><span class="p">);</span>
         <span class="nv">$dataset</span> <span class="o">=</span> <span class="nx">Dataset</span><span class="o">::</span><span class="na">model</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s2">&#34;identifier=?&#34;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="nv">$doi</span><span class="p">));</span>

         <span class="k">if</span> <span class="p">(</span><span class="nv">$dataset</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nx">in_array</span><span class="p">(</span><span class="nv">$dataset</span><span class="o">-&gt;</span><span class="na">upload_status</span><span class="p">,</span> <span class="nv">$status_array</span><span class="p">))</span> <span class="p">{</span>
             <span class="nv">$xml_data</span> <span class="o">=</span> <span class="nv">$dataset</span><span class="o">-&gt;</span><span class="na">toXML</span><span class="p">();</span>
             <span class="nv">$ch</span><span class="o">=</span> <span class="nx">curl_init</span><span class="p">();</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$mds_metadata_url</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="s2">&#34;</span><span class="si">$xml_data</span><span class="s2">&#34;</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Content-Type:application/xml;charset=UTF-8&#39;</span><span class="p">));</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_USERPWD</span><span class="p">,</span> <span class="nv">$mds_username</span> <span class="o">.</span> <span class="s2">&#34;:&#34;</span> <span class="o">.</span> <span class="nv">$mds_password</span><span class="p">);</span>
             <span class="nv">$curl_response</span> <span class="o">=</span> <span class="nx">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
             <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;md_curl_response&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$curl_response</span><span class="p">;</span>
             <span class="nv">$info1</span> <span class="o">=</span> <span class="nx">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
             <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;md_curl_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$info1</span><span class="p">[</span><span class="s1">&#39;http_code&#39;</span><span class="p">];</span>
             <span class="nx">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="p">;</span>
         <span class="p">}</span>

         <span class="k">if</span> <span class="p">(</span><span class="nv">$dataset</span> <span class="o">&amp;&amp;</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;md_curl_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
             <span class="nv">$doi_data</span> <span class="o">=</span> <span class="s2">&#34;doi=&#34;</span><span class="o">.</span><span class="nv">$mds_prefix</span><span class="o">.</span><span class="s2">&#34;/&#34;</span><span class="o">.</span><span class="nv">$doi</span><span class="o">.</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="o">.</span><span class="s2">&#34;url=http://gigadb.org/dataset/&#34;</span><span class="o">.</span><span class="nv">$dataset</span><span class="o">-&gt;</span><span class="na">identifier</span> <span class="p">;</span>
             <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;doi_data&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="nv">$doi_data</span><span class="p">;</span>
             <span class="nv">$ch2</span><span class="o">=</span> <span class="nx">curl_init</span><span class="p">();</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$mds_doi_url</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$doi_data</span><span class="p">);</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Content-Type:application/xml;charset=UTF-8&#39;</span><span class="p">));</span>
             <span class="nx">curl_setopt</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">,</span> <span class="nx">CURLOPT_USERPWD</span><span class="p">,</span> <span class="nv">$mds_username</span> <span class="o">.</span> <span class="s2">&#34;:&#34;</span> <span class="o">.</span> <span class="nv">$mds_password</span><span class="p">);</span>
             <span class="nv">$curl_response</span> <span class="o">=</span> <span class="nx">curl_exec</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">);</span>
             <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;doi_curl_response&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$curl_response</span><span class="p">;</span>
             <span class="nv">$info2</span> <span class="o">=</span> <span class="nx">curl_getinfo</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">);</span>
             <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;doi_curl_status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$info2</span><span class="p">[</span><span class="s1">&#39;http_code&#39;</span><span class="p">];</span>
             <span class="nx">curl_close</span><span class="p">(</span><span class="nv">$ch2</span><span class="p">)</span> <span class="p">;</span>
         <span class="p">}</span>

         <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;doi_curl_status&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;doi_curl_status&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">201</span><span class="p">)</span> <span class="p">{</span>
             <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
         <span class="p">}</span>
     <span class="p">}</span>

     <span class="k">echo</span> <span class="nx">json_encode</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
     <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
 <span class="p">}</span>
</code></pre></div><h3 id="done---project">Done - Project</h3>
<h3 id="todo---github">Todo - Github</h3>
<ol>
<li>Follow up <a href="https://github.com/gigascience/gigadb-website/pull/521">Add-citation-box-#521</a>
<ul>
<li>Update <code>&lt;a&gt;&lt;/a&gt;</code> elements to <code>&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;</code> structure</li>
<li>Tried to use <code>bootstrap</code> dropdown button</li>
</ul>
</li>
<li>Review <a href="https://github.com/gigascience/gigadb-website/pull/546">fuw-cicd-#546</a>, review doc at <a href="https://gist.github.com/kencho51/6b5cebd15c9419484e73b2439a34f0d1">here</a></li>
</ol>
<h3 id="done---github">Done - Github</h3>
<h3 id="aob">AOB</h3>
<ol>
<li>Follow up server issue
<ul>
<li>192.168.208.43, 192.168.208.44, 192.168.208.74 have been returned back to BGI IT team</li>
<li>Still owning 192.168.208.73 and it is running, because it is hosting <a href="http://www.gigadb.org">www.gigadb.org</a></li>
</ul>
</li>
<li>Follow up NAS issue
<ul>
<li>杨杰威(Jed Yang) is helping us to gather compliance and regulation information from 曾文君(Ken Zeng), and his supervisor, Alex, would like to know why we would want to have a NAS</li>
<li>郑康和(Kanghe Zheng), the one who suggests us to place the NAS in BGI Tai Po and later the 3rd party Data centre in HK, wants to meet with us together with 周飞羽(Feiyu Zhou) and  田晶(Jing Tian) on 14/5 at 1400</li>
</ul>
</li>
</ol>
<h3 id="reference">Reference</h3>
<p><a href="https://travis-ci.com/kencho51/gigathing"><img src="https://travis-ci.com/kencho51/gigathing.svg?branch=master" alt="Build Status"></a></p>

</div>
    </article>
</div>

<script src="https://utteranc.es/client.js"
        repo="kencho51/comments_for_hugo"
        issue-term="pathname"
        label="hugo"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a href="https://kencho51.github.io/">kencho51</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#" aria-label="Back to Top">
                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2021 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="https://kencho51.github.io/js/jquery-1.11.3.min.js"></script>
        <script src="https://kencho51.github.io/js/jquery.fitvids.js"></script>
        <script src="https://kencho51.github.io/js/scripts.js"></script>
    </body>
</html>
